##
# TECHNOLOGY DEFINITIONS
##

templates:
    interest_rate_setter:
      cost_interest_rate:
        data: 0.1  # average wind onshore WACC OECD from [@Steffen:2019]
        index: monetary
        dims: costs

techs:

  ##------------------------------------------------------------------------------------------
  # Firm supply
  ##------------------------------------------------------------------------------------------

  # lost load
  lost_load:  # dummy supply technology to represent lost load
    name: 'Lost load'
    color: '#030303'
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    lifetime: 20
    cost_flow_out:
      data: 1e4 # kEUR per MWh, just a very high price, to make it the least attractive option
      index: monetary
      dims: costs
    # lost load-end

  # import power
  import_power:  # dummy supply technology to represent import of power
    name: 'Power Import'
    color: '#12b7e0'
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    lifetime: 20
    cost_flow_out:
      data:  0.1 # kEUR per MWh
      index: monetary
      dims: costs
    # import power-end
    
  # # import power hydrogen
  import_hydrogen:
    name: "Hydrogen import"
    color: '#ff31fe'
    base_tech: supply
    template: interest_rate_setter
    carrier_out: hydrogen
    cost_flow_out:
      data: 0.231  # kEUR per MWh green hydrogen price international
      index: monetary
      dims: costs
  #   # import hydrogen-end


  hydro_ccgt_new: #data: Gas turbine, combined cycle - extraction - natural gas - large (DEA)
    name: "Combined cycle gas turbine hydrogen new" #new hydrogen plant
    color: "#24823E"
    base_tech: conversion
    template: interest_rate_setter
    carrier_in: hydrogen
    carrier_out: power
    flow_out_eff: 0.6
    flow_ramping: 
    lifetime: 25
    cost_flow_cap:
      data: 877  # kEUR per MW (scenariostudie kernenergie)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00425 # kEUR per MWh
      index: monetary
      dims: costs
    # cost_flow_in:
    #   data: 0.231 # kEUR per MWh (green hydrogen price international)
    #   index: monetary
    #   dims: costs
    om_annual_investment_fraction:
      data: 3.25 # (fixed O&M/nominal investment)*100
      index: monetary
      dims: costs

  hydro_ocgt_new: #Gas turbine, open cycle - back pressure - natural gas - medium (DEA)
    name: "Open cycle gas turbine hydrogen new" #new hydrogen plant
    color: "#D41616"
    base_tech: conversion
    template: interest_rate_setter
    carrier_in: hydrogen
    carrier_out: power
    flow_out_eff: 0.44 #(scenariostudie kernenergie)
    flow_ramping: 1
    lifetime: 30 #(scenariostudie kernenergie)
    cost_flow_cap:
      data: 460   # kEUR per MW (scenariostudie kernenergie)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00479 # kEUR per MWh
      index: monetary
      dims: costs
    # cost_flow_in:
    #   data: 0.231 # kEUR per MWh (green hydrogen price international)
    #   index: monetary
    #   dims: costs
    om_annual_investment_fraction:
      data: 1.794 # (fixed O&M/nominal investment)*100
      index: monetary
      dims: costs
      

  hydro_ccgt_rebuilt:
    name: "Combined cycle gas turbine hydrogen rebuilt" #rebuilt hydrogen plant
    color: "#32A852"
    base_tech: conversion
    template: interest_rate_setter
    carrier_in: hydrogen
    carrier_out: power
    flow_out_eff: 0.59
    flow_ramping: 
    lifetime: 30
    cost_flow_cap:
      data: 182  # kEUR per MW (Aurora Energy Research, 2023)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00425 # kEUR per MWh
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 3.25 # fraction/total investment
      index: monetary
      dims: costs
      

  hydro_ocgt_rebuilt:
    name: "Open cycle gas turbine hydrogen rebuilt" #rebuilt hydrogen plant
    color: "#6BA292"
    base_tech: conversion
    template: interest_rate_setter
    carrier_in: hydrogen
    carrier_out: power
    flow_out_eff: 0.42
    flow_ramping: 1
    lifetime: 30
    cost_flow_cap:
      data: 182   # kEUR per MW (Aurora Energy Research, 2023)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00479 # kEUR per MWh
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 1.794 # fraction/total investment: OCGT - natural gas
      index: monetary
      dims: costs

  BECCS_rebuilt:
    name: "Bioenergy with carbon capture and storage rebuilt" #rebuilt from coal plant
    color: "#E37A72"
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    flow_out_eff: 0.32
    flow_ramping:
  #  flow_cap_max_systemwide: 20000 #MW
    lifetime: 40
    cost_flow_cap:
      data: 2758  # kEUR per MW (scenariostudie kernenergie)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00422 # kEUR per MWh (scenariostudie kernenergie)
      index: monetary
      dims: costs
    cost_flow_in:
      data: 0.060 # kEUR per MWh (IEA Biomass)
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 6 # %CAPEX /jaar (scenariostudie kernenergie)
      index: monetary
      dims: costs

  # BECCS:
  #   name: "Bioenergy with carbon capture and storage" 
  #   color: "#E37A72"
  #   base_tech: supply
  #   template: interest_rate_setter
  #   carrier_out: power
  #   flow_out_eff: 0.32
  #   flow_ramping:
  #   flow_cap_max_systemwide: 20000 #MW
  #   lifetime: 25
  #   cost_flow_cap:
  #     data: 3126  # kEUR per MW (scenariostudie kernenergie)
  #     index: monetary
  #     dims: costs
  #   cost_flow_out:
  #     data: 0.00422 # kEUR per MWh (scenariostudie kernenergie)
  #     index: monetary
  #     dims: costs
  #   cost_flow_in:
  #     data: 0.060 # kEUR per MWh (IEA Biomass)
  #     index: monetary
  #     dims: costs
  #   om_annual_investment_fraction:
  #     data: 6 # %CAPEX /jaar (scenariostudie kernenergie)
  #     index: monetary
  #     dims: costs

  nuclear:
    name: "Nuclear gas plant" 
    color: "#B1B695"
    base_tech: supply
    carrier_out: power
    flow_out_eff: 0.35
    flow_ramping: 0.8
    lifetime: 60
    cost_flow_cap:
      data: 4100  # kEUR per MW: scenariostudie kernenergie (relatively low)
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.004 # kEUR per MWh: scenariostudie kernenergie
      index: monetary
      dims: costs
    cost_flow_in:
      data: 0.008 # kEUR per MWh (Uranium price)
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 2.195 # FOM/CAPEX (scenariostudie kernenergie)
      index: monetary
      dims: costs

  SMR: #big SMR is 300MWe/unit, small is 50MWe/unit
    name: "Small modular reactor" 
    color: "#B72406"
    base_tech: supply
    carrier_out: power
#    source_use_max: 15000
    flow_out_eff: 0.35
    flow_ramping: 0.9
    lifetime: 60
    cost_flow_cap:
      data: 2700  # kEUR per MW (scenariostudie kernenergie )
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.004 # kEUR per MWh: scenariostudie kernenergie
      index: monetary
      dims: costs
    cost_flow_in:
      data: 0.0082 # kEUR per MWh (Uranium price)
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 4.44 # FOM/CAPEX (scenariostudie kernenergie)
      index: monetary
      dims: costs

  hydro:
    name: "Hydropower plant" 
    color: "#FA824C"
    base_tech: supply
    carrier_out: power
    #energy_cap_max: 38 #MW of installed hydro
    flow_out_eff: 0.9
    flow_ramping: 1
    lifetime: 80
    cost_flow_cap:
      data: 2.437  # kEUR per MW
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00 # kEUR per MWh
      index: monetary
      dims: costs
    cost_flow_in:
      data: 0.00 # kEUR per MWh (water)
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 2.2 # FOM/CAPEX (scenariostudie kernenergie)
      index: monetary
      dims: costs

 
  ##------------------------------------------------------------------------------------------
  # Variable renewable supply
  ##------------------------------------------------------------------------------------------

  solar_pv: #PV - renewable power - solar - commercial/industrial rooftop
    name: "Solar photovoltaic power"
    color: "#F9D956"
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    source_unit: per_cap
    lifetime: 40 
    cost_flow_cap:
      data: 410 # kEUR per MW
      index: monetary
      dims: costs
    cost_flow_out:
      data:  0.0000106 # kEUR per MWh (model francesco)
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 1.829 # FOM/nominal investment: rooftop PV comm.&industrial
      index: monetary
      dims: costs

  wind_onshore:
    name: "Wind power onshore"
    color: "#56F9C0"
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    source_unit: per_cap
    lifetime: 30 
    cost_flow_cap:
      data: 1090 # kEUR per MW
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00185 # kEUR per MWh
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 1.431 # FOM/nominal investment
      index: monetary
      dims: costs


  wind_offshore_DC:
    name: "Wind power offshore direct current"
    color: "#9BE0FC"
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    source_unit: per_cap
    lifetime: 30 
    cost_flow_cap:
      data: 2867 # kEUR per MW
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00278 # kEUR per MW
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 0.976 # FOM/nominal investment
      index: monetary
      dims: costs
      

  wind_offshore_AC: #Offshore Wind - AC connected - Fixed bottom
    name: "Wind power offshore alternating current"
    color: "#56CBF9"
    base_tech: supply
    template: interest_rate_setter
    carrier_out: power
    source_unit: per_cap
    lifetime: 30 
    cost_flow_cap:
      data: 1986 # kEUR per MW
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00278 # kEUR per MWh
      index: monetary
      dims: costs
    om_annual_investment_fraction:
      data: 1.407 # FOM/nominal investment
      index: monetary
      dims: costs

      
  ##------------------------------------------------------------------------------------------
  # Storage
  ##------------------------------------------------------------------------------------------

  # battery storage

  li_ion_battery:
    name: 'Li-ion Battery storage'
    color: '#3DDA19'            
    base_tech: storage
    template: interest_rate_setter
    carrier_in: power
    carrier_out: power    
    storage_discharge_depth: 0.15
    lifetime: 30  # 50000 charge cycles
    flow_cap_per_storage_cap_max: 0.25 #takes 4 hours for discharging 
    flow_out_eff: 0.975
    flow_in_eff: 0.985
    storage_loss: 0.0041  # 0.41% loss per hour assumedcosts:
    cost_storage_cap: 
      data: 270 # kEUR per MWh
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction: 
      data: 0.211 # FOM/specific investment
      index: monetary
      dims: costs
    cost_flow_out: 
      data: 0.00170 # kEUR/MWh
      index: monetary
      dims: costs
    

  flow_ion_battery:
    name: 'Flow-ion Battery storage' #vanadium redox flow
    color: '#30A216'            
    base_tech: storage
    template: interest_rate_setter
    carrier_in: power
    carrier_out: power    
    storage_discharge_depth: 0.1
    lifetime: 13  # 3000 charge cycles
    flow_cap_per_storage_cap_max: 0.025 #takes 40 hours for discharging (was 0.1) II3050
    flow_out_eff: 0.78
    flow_in_eff: 0.99
    storage_loss: 0.001  # 0% loss per hour assumedcosts: 0.1%, otherwise it does not discharge
    cost_storage_cap: 
      data: 350 # kEUR per MWh
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction: 
      data: 1.5 # FOM %
      index: monetary
      dims: costs
    cost_flow_out: 
      data: 0.00096 # kEUR/MWh
      index: monetary
      dims: costs
    
  # battery storage-end
  
  CAES:
    name: "compressed air energy storage"
    color: "#F593D4"
    base_tech: storage
    carrier_in: power
    carrier_out: power
    storage_discharge_depth: 0  # full discharge possible
    storage_loss: 0.001  # negligible losses
    flow_cap_per_storage_cap_max: 0.10  # 10% of capacity per day withdrawal rate (THIS SHOULD BE PER HOUR)
    lifetime: 40
    cost_storage_cap:
      data: 851  # kEUR per MWh
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction:
      data: 0.307  # FOM/specific investment
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.002616  # kEUR per MWh (low operational cost)
      index: monetary
      dims: costs
  # mechanical storage-end

  # underground hydrogen storage
  hydrogen_cavern:
    name: "Underground hydrogen storage"
    color: "#A5D6A7"
    base_tech: storage
    carrier_in: hydrogen
    carrier_out: hydrogen
    storage_discharge_depth: 0  # full discharge possible
    storage_loss: 0.001  # negligible losses
    flow_cap_per_storage_cap_max: 0.004  # 10% of capacity per day withdrawal rate (before this was 0.1) source: "Large-scale Hydrogen Storage in Salt Caverns", TNO
    lifetime: 50
    cost_storage_cap:
      data: 1.28  # kEUR per MWh
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction:
      data: 0.000002120  # FOM/specific investment
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00000001443  # kEUR per MWh (low operational cost)
      index: monetary
      dims: costs
  # underground hydrogen storage-end
  
  hydrogen_fuel_cell:
    name: "Hydrogen Fuel Cell"
    color: "#CA0EF0"
    base_tech: conversion
    carrier_in: hydrogen
    carrier_out: power
    flow_out_eff: 0.5  # electrical efficiency
    flow_ramping: 1.0   # fast response capability
    lifetime: 10        # in years
    cost_flow_cap:
      data: 850  # kEUR per MW
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction:
      data: 5.00  # fixed O&M/nominal investment
      index: monetary
      dims: costs
    cost_flow_out:
      data: 0.00  # variable O&M cost per MWh
      index: monetary
      dims: costs

  ##------------------------------------------------------------------------------------------
  # Electrolyser
  ##------------------------------------------------------------------------------------------
  electrolyser:
    name: "Alkaline electrolyser 10MW plant"
    color: "#CF226D"
    base_tech: conversion
    carrier_in: power
    carrier_out: hydrogen
    lifetime: 25 #DEA
    flow_out_eff: 0.8 #scenariostudie kernenergie
    cost_flow_cap:
      data: 395  # kEUR per MW scenariostudie kernenergie (lijkt wat hoog, misschien 300?)
      index: monetary
      dims: costs
    cost_flow_in:
      data: 0.00 # kEUR per MWh price of green power
      index: monetary
      dims: costs
    cost_om_annual_investment_fraction:
      data: 1.5 # %CAPEX/jaar scenariostudie kernenergie
      index: monetary
      dims: costs
    


  ##
  # Demand
  ##

  demand_power:
    name: "Power demand"
    color: "#072486"
    base_tech: demand
    carrier_in: power

  curtailment:
    name: "Power curtailment"
    color: "#70002a"
    base_tech: demand
    carrier_in: power
    resource_use_max: 110000 # higher than peak demand

  export_power:
    name: "Power export"
    color: "#ff31fe"
    base_tech: demand
    carrier_in: power
    resource_use_max: 110000 # higher than peak demand (set to 93000)
    cost_flow_in:
      data: -0.1 # kEUR per MW (CHECK THE AVERAGE PRICE OF THE MARKET PER COUNTRY)
      index: monetary
      dims: costs

  hydrogen_demand: #to sell hydrogen
    name: "Hydrogen demand"
    color: "#098607"
    base_tech: demand
    carrier_in: hydrogen
    #something flow out max
    sink_use_max: 56000 #higher than the max demand on another dataset with fixed hydrogen demand 
    cost_flow_in:
      data: -0.019 #kEUR per MWh (price of hydrogen will be around 3 dollars/kg, 1kg = 33.3kWh, this gives 90.9 dollars/MWh
      index: monetary
      dims: costs


    





    